<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>å…¶å®åœ¨ new vue()ä¹‹å‰å·²ç»ä¸ºåˆ›å»º vue å®ä¾‹åšäº†å¾ˆå¤šå‰ç½®æ€§å·¥ä½œï¼Œå¤§è‡´å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ç‚¹ |  learning ğŸ¤”</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="ing">
    
    <link rel="preload" href="/assets/css/0.styles.e4d8b86b.css" as="style"><link rel="preload" href="/assets/js/app.8a3e4be4.js" as="script"><link rel="preload" href="/assets/js/2.b1c453a7.js" as="script"><link rel="preload" href="/assets/js/43.f3f083c8.js" as="script"><link rel="prefetch" href="/assets/js/10.a1484098.js"><link rel="prefetch" href="/assets/js/11.b70f6910.js"><link rel="prefetch" href="/assets/js/12.aa4e4756.js"><link rel="prefetch" href="/assets/js/13.24822fb7.js"><link rel="prefetch" href="/assets/js/14.ba83d711.js"><link rel="prefetch" href="/assets/js/15.ce56a167.js"><link rel="prefetch" href="/assets/js/16.510d6dca.js"><link rel="prefetch" href="/assets/js/17.41412f1e.js"><link rel="prefetch" href="/assets/js/18.8143a9b6.js"><link rel="prefetch" href="/assets/js/19.dfc55bfb.js"><link rel="prefetch" href="/assets/js/20.d149cd7c.js"><link rel="prefetch" href="/assets/js/21.282166c1.js"><link rel="prefetch" href="/assets/js/22.c878d45b.js"><link rel="prefetch" href="/assets/js/23.7ea9cee2.js"><link rel="prefetch" href="/assets/js/24.0a65f294.js"><link rel="prefetch" href="/assets/js/25.cf952e8f.js"><link rel="prefetch" href="/assets/js/26.fa6a6b52.js"><link rel="prefetch" href="/assets/js/27.986b9955.js"><link rel="prefetch" href="/assets/js/28.cd904e4d.js"><link rel="prefetch" href="/assets/js/29.22c8bd30.js"><link rel="prefetch" href="/assets/js/3.0b8b26d0.js"><link rel="prefetch" href="/assets/js/30.f974ab27.js"><link rel="prefetch" href="/assets/js/31.c099b303.js"><link rel="prefetch" href="/assets/js/32.eb8d6a86.js"><link rel="prefetch" href="/assets/js/33.77cf9e9a.js"><link rel="prefetch" href="/assets/js/34.67e1bc26.js"><link rel="prefetch" href="/assets/js/35.acda1906.js"><link rel="prefetch" href="/assets/js/36.8f514314.js"><link rel="prefetch" href="/assets/js/37.75d78737.js"><link rel="prefetch" href="/assets/js/38.e372ed82.js"><link rel="prefetch" href="/assets/js/39.31d074d8.js"><link rel="prefetch" href="/assets/js/4.e7c996f5.js"><link rel="prefetch" href="/assets/js/40.a0159801.js"><link rel="prefetch" href="/assets/js/41.633bb894.js"><link rel="prefetch" href="/assets/js/42.2ef5b25c.js"><link rel="prefetch" href="/assets/js/44.e18663a3.js"><link rel="prefetch" href="/assets/js/45.0853c943.js"><link rel="prefetch" href="/assets/js/46.bb71b1df.js"><link rel="prefetch" href="/assets/js/47.806d670b.js"><link rel="prefetch" href="/assets/js/48.9a81b491.js"><link rel="prefetch" href="/assets/js/49.cc728521.js"><link rel="prefetch" href="/assets/js/5.6eff8140.js"><link rel="prefetch" href="/assets/js/50.64a8e83d.js"><link rel="prefetch" href="/assets/js/51.9125457b.js"><link rel="prefetch" href="/assets/js/52.17eb17a0.js"><link rel="prefetch" href="/assets/js/6.17d5dd20.js"><link rel="prefetch" href="/assets/js/7.576da1bf.js"><link rel="prefetch" href="/assets/js/8.6fffe5ac.js"><link rel="prefetch" href="/assets/js/9.6ab3dd2a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e4d8b86b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name"> learning ğŸ¤”</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>frontend</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>javascript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>html</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>css</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>browser</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>typescript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>nodejs</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>vuejs</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/frontend/vue_vuex_vue-router_nuxt/vcode/1.html" aria-current="page" class="active sidebar-link">new vue()ä¹‹å‰éƒ½å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿï¼ˆä¸€ï¼‰</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/frontend/vue_vuex_vue-router_nuxt/vcode/2.html" class="sidebar-link">new Vue(options) ä¸­çš„optionsåˆå¹¶å¤„ç†ï¼ˆäºŒï¼‰</a></li><li><a href="/frontend/vue_vuex_vue-router_nuxt/vcode/3.html" class="sidebar-link">åœ¨new Vue(options)ä¸­æ˜¯å¦‚ä½•ä¸ºoptionsè¿›è¡Œåˆå§‹åŒ–ï¼ˆä¸‰ï¼‰</a></li><li><a href="/frontend/vue_vuex_vue-router_nuxt/vcode/4.html" class="sidebar-link">initStateä¸å“åº”å¼åŸç†ï¼ˆå››ï¼‰</a></li><li><a href="/frontend/vue_vuex_vue-router_nuxt/vcode/5.html" class="sidebar-link">ä»$mountåˆ°è™šæ‹Ÿdomï¼ˆäº”ï¼‰</a></li><li><a href="/frontend/vue_vuex_vue-router_nuxt/vcode/diff.html" class="sidebar-link">diff æºç  æ³¨é‡Šç‰ˆ</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>threejs</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>backend</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>basic</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h3 id="å…¶å®åœ¨-new-vue-ä¹‹å‰å·²ç»ä¸ºåˆ›å»º-vue-å®ä¾‹åšäº†å¾ˆå¤šå‰ç½®æ€§å·¥ä½œ-å¤§è‡´å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ç‚¹"><a href="#å…¶å®åœ¨-new-vue-ä¹‹å‰å·²ç»ä¸ºåˆ›å»º-vue-å®ä¾‹åšäº†å¾ˆå¤šå‰ç½®æ€§å·¥ä½œ-å¤§è‡´å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ç‚¹" class="header-anchor">#</a> å…¶å®åœ¨ new vue()ä¹‹å‰å·²ç»ä¸ºåˆ›å»º vue å®ä¾‹åšäº†å¾ˆå¤šå‰ç½®æ€§å·¥ä½œï¼Œå¤§è‡´å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ç‚¹</h3> <ol><li>initMixin</li> <li>stateMixin</li> <li>eventMixin</li> <li>lifecycleMixin</li> <li>renderMixin</li> <li>initGlobalAPI</li> <li>createPatchFunction</li> <li>åˆå§‹åŒ– config å’Œæ ¡éªŒç›¸å…³ map-funtion</li> <li>å®‰è£…å¹³å°ç›¸å…³çš„å…¨å±€æŒ‡ä»¤å’Œç»„ä»¶</li> <li>åˆ›å»ºæ¨¡ç‰ˆç¼–è¯‘å™¨ compiler</li></ol> <h4 id="initmixin"><a href="#initmixin" class="header-anchor">#</a> initMixin</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">_init</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>åˆå§‹åŒ–åˆ›å»º vue å®ä¾‹çš„æ–¹æ³•ï¼Œåœ¨<code>new vue()</code>ä¼ å…¥çš„ options å°±å°†ä½œä¸ºè¿™ä¸ªæ–¹æ³•çš„å‚æ•°ä¼ å…¥ã€‚</li> <li>ä¸å•å•æ˜¯å¤–éƒ¨è°ƒç”¨ï¼Œè¿˜å­˜åœ¨ vue å†…éƒ¨ç”Ÿæˆå­ç»„ä»¶çš„æ—¶å€™ï¼Œä¹ŸåŒæ ·ä¼šé€šè¿‡ init æ–¹æ³•å»åˆ›å»ºå­ç»„ä»¶çš„ vm å®ä¾‹ã€‚</li></ul> <h4 id="statemixin"><a href="#statemixin" class="header-anchor">#</a> stateMixin</h4> <div class="language-js extra-class"><pre class="language-js"><code>  Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span><span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token string">'$data'</span><span class="token punctuation">,</span> dataDef<span class="token punctuation">)</span><span class="token punctuation">;</span>
  Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span><span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token string">'$props'</span><span class="token punctuation">,</span> propsDef<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$set <span class="token operator">=</span> set
  <span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$<span class="token keyword">delete</span> <span class="token operator">=</span> del
  <span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">$watch</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
</code></pre></div><ul><li>ä»£ç†<code>_data</code>åˆ°<code>$data</code>ä¸Šå»ï¼Œä½œä¸º<code>Vue</code>çš„åŸå‹å±æ€§ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡<code>this.$data</code>è®¿é—®æ•°æ®æ¨¡å‹ã€‚</li> <li>ä»£ç†<code>_props</code>åˆ°<code>$props</code>ä¸Šå»ï¼ŒåŒ<code>$data</code>ã€‚</li> <li>å®‰è£…å“åº”å¼çš„å¯¹è±¡æ“ä½œæ–¹æ³• <code>$set $delete</code>ï¼Œè¿™äº›æ–¹æ³•æä¾›ç»™ç”¨æˆ·å»åšå¯¹è±¡æˆ–è€…æ•°ç»„å±æ€§çš„åˆ é™¤ï¼Œæ·»åŠ ã€‚</li> <li>å®‰è£…å“åº”å¼å¯¹è±¡ç›‘å¬æ–¹æ³• <code>$watch</code>,ç»™ç”¨æˆ·ä¸€ä¸ªå…¥å£åœ¨æ•°æ®å˜åŒ–ä¹‹åè§¦å‘æƒ³è¦åšçš„äº‹ã€‚</li></ul> <h4 id="eventmixin"><a href="#eventmixin" class="header-anchor">#</a> eventMixin</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">$on</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
<span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">$off</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
<span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">$emit</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
<span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">$once</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
</code></pre></div><p>å®‰è£…äº‹ä»¶ç›¸å…³æ–¹æ³•,çˆ¶å­ç»„ä»¶é€šä¿¡çš„æ–¹æ³•ï¼š</p> <ul><li>$on å¾€å½“å‰ vm çš„äº‹ä»¶ä¸­å¿ƒ push ä¸€ä¸ªäº‹ä»¶ ä¹Ÿå°±æ˜¯ä¾¦å¬ä¸€ä¸ªäº‹ä»¶</li> <li>$once å¾€å½“å‰vmçš„äº‹ä»¶ä¸­å¿ƒpushä¸€ä¸ªäº‹ä»¶,å½“å‰äº‹ä»¶æ‰§è¡Œåç«‹å³$off</li> <li>$emit è§¦å‘äº‹ä»¶ä¸­å¿ƒä¸­çš„æŸä¸ªäº‹ä»¶</li> <li>$off ä»äº‹ä»¶ä¸­å¿ƒä¸­åˆ é™¤æŸä¸ªäº‹ä»¶</li></ul> <h4 id="lifecyclemixin"><a href="#lifecyclemixin" class="header-anchor">#</a> lifecycleMixin</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">_update</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">vnode<span class="token punctuation">,</span> hydrating</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
<span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">$forceUpdate</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
<span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">$destroy</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
</code></pre></div><p>åˆå§‹åŒ–ç”Ÿå‘½å‘¨æœŸç›¸å…³æ–¹æ³•ï¼š</p> <ul><li>vm._update æ˜¯å®ä¾‹çš„ä¸€ä¸ªç§æœ‰æ–¹æ³•ï¼Œå®ƒè¢«è°ƒç”¨çš„æ—¶æœºæœ‰ 2 ä¸ªï¼Œä¸€ä¸ªæ˜¯é¦–æ¬¡æ¸²æŸ“ï¼Œä¸€ä¸ªæ˜¯æ•°æ®æ›´æ–°çš„æ—¶å€™ï¼›_update æ–¹æ³•çš„ä½œç”¨æ˜¯æŠŠ VNode æ¸²æŸ“æˆçœŸå®çš„ DOMï¼Œ_update çš„æ ¸å¿ƒå°±æ˜¯è°ƒç”¨ vm.__patch__ æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•å®é™…ä¸Šåœ¨ä¸åŒçš„å¹³å°ï¼Œæ¯”å¦‚ web å’Œ weex ä¸Šçš„å®šä¹‰æ˜¯ä¸ä¸€æ ·çš„ã€‚</li> <li>vm.$forceUpdate è®©å½“å‰ç»„ä»¶çš„æ¸²æŸ“ watcher å»æ‰§è¡Œä¸€æ¬¡ update æ“ä½œï¼Œé‡æ–°æ¸²æŸ“è§†å›¾ã€‚</li> <li>vm.$destory æ¸…ç©ºäº‹ä»¶ä¸­å¿ƒï¼Œä»ç»„ä»¶å…³ç³»ä¸­åˆ é™¤å½“å‰vmï¼Œå…³é—­å½“å‰ç»„ä»¶çš„æ¸²æŸ“watcherï¼Œå½“å‰$data.__ob__.vm è®¡æ•°å™¨å‡ 1ï¼Œæ ‡è®°å½“å‰ vm ä¸ºé”€æ¯çŠ¶æ€ï¼Œpatch ä¸€ä¸ª null æ›¿æ¢åŸ vnodeï¼Œæ‰§è¡Œç”¨æˆ·ä¼ å…¥çš„ destoryd é’©å­ã€‚</li></ul> <h4 id="rendermixin"><a href="#rendermixin" class="header-anchor">#</a> renderMixin</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">installRenderHelpers</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">$nextTick</span>  <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
<span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">_render</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
</code></pre></div><p>åˆå§‹åŒ–æ¸²æŸ“ vnode çš„ç›¸å…³æ–¹æ³•ï¼š</p> <ul><li>installRenderHelpers å®‰è£…æ¸²æŸ“å·¥å…·å‡½æ•°ï¼Œå¤§å¤šæ•°æœåŠ¡äºç¼–è¯‘å™¨ç¼–è¯‘å‡ºæ¥çš„ä»£ç ï¼Œå…¶ä¸­çš„æ–¹æ³•åŒ…æ‹¬
<blockquote><ul><li>target._o = markOnce; æ ‡è®° v-once</li> <li>target._n = toNumber; è½¬æ¢æˆ Number ç±»å‹</li> <li>target._s = toString; è½¬æ¢æˆå­—ç¬¦ä¸²</li> <li>target._l = renderList; æ¸²æŸ“ v-for</li> <li>target._t = renderSlot; æ¸²æŸ“æ™®é€šæ’æ§½å’Œä½œç”¨åŸŸæ’æ§½</li> <li>target._q = looseEqual; å®½æ¾æ¯”è¾ƒ</li> <li>target._i = looseIndexOf; å®½æ¾ indexof</li> <li>target._m = renderStatic; é€šè¿‡ staticRenderFns æ¸²æŸ“é™æ€èŠ‚ç‚¹</li> <li>target._f = resolveFilter; è·å–è¿‡æ»¤å™¨</li> <li>target._k = checkKeyCodes; æ£€æŸ¥é”®ç›˜äº‹ä»¶ keycode</li> <li>target._b = bindObjectProps; å¤„ç† v-bind='{}'åˆ° vnodedata ä¸Š</li> <li>target._v = createTextVNode; åˆ›å»ºæ–‡æœ¬ vnode</li> <li>target._e = createEmptyVNode; åˆ›å»ºç©º vnode</li> <li>target._u = resolveScopedSlots; è·å–ä½œç”¨åŸŸæ’æ§½</li> <li>target._g = bindObjectListeners; å¤„ç† v-on='{}'åˆ° vnodedata ä¸Š</li> <li>target._d = bindDynamicKeys; å¤„ç†åŠ¨æ€å±æ€§å</li> <li>target._p = prependModifier; å¤„ç†ä¿®é¥°ç¬¦</li></ul></blockquote></li> <li>vm.$nextTick å·¥å…·æ–¹æ³• å°è£…äº† nextTick åœ¨ä¸‹ä¸ªæ—¶é—´å¾ªç¯æ‰§è¡ŒæŸä¸ªäº‹ä»¶</li> <li>vm._render è°ƒç”¨ç¼–è¯‘ä¼ å…¥çš„ render å‡½æ•°æˆ–è€…æ˜¯ç”¨æˆ·æ‰‹å†™çš„ render å‡½æ•°ï¼Œç”Ÿæˆç”¨äº patch çš„ vnode</li></ul> <h4 id="initglobalapi"><a href="#initglobalapi" class="header-anchor">#</a> initGlobalAPI</h4> <div class="language-js extra-class"><pre class="language-js"><code>Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>Vue<span class="token punctuation">,</span> <span class="token string">'config'</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Vue<span class="token punctuation">.</span>util <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
<span class="token punctuation">[</span><span class="token string">'filter'</span><span class="token punctuation">,</span><span class="token string">'component'</span><span class="token punctuation">,</span><span class="token string">'directive'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token operator">=&gt;</span>Vue<span class="token punctuation">[</span>item<span class="token operator">+</span><span class="token string">'s'</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">...</span>
</code></pre></div><ul><li>Vue.config æä¾›å…¨å±€è®¿é—®çš„ config ç”¨ä»¥é…ç½® Vue.config</li> <li>Vue.util æä¾›å…¨å±€å·¥å…·é›†</li> <li>Vue.set vm.$set</li> <li>Vue.delete vm.$delete</li> <li>Vue.nextTick vm.$nextTick</li> <li>Vue.observable åˆå§‹åŒ–å®šä¹‰å“åº”å¼çš„æ•°æ®çš„æ–¹æ³•</li> <li>Vue.extend åˆå§‹åŒ–ç»„ä»¶æ„é€ å™¨æ–¹æ³•</li> <li><code>['filter','component','directive'].forEach(item=&gt;Vue[item+'s']=function(){})</code> åˆå§‹åŒ–å…¨å±€èµ„æºæ³¨å†Œæ–¹æ³• åŒ…å«æ³¨å†Œè¿‡æ»¤å™¨çš„æ–¹æ³• æ³¨å†Œç»„ä»¶çš„æ–¹æ³• æ³¨å†ŒæŒ‡ä»¤çš„æ–¹æ³•</li> <li>Vue.Mixin åˆå§‹åŒ–æ··å…¥æ–¹æ³•</li> <li>Vue.use åˆå§‹åŒ–æ’ä»¶å®‰è£…æ–¹æ³•</li> <li>Vue.options åˆå§‹åŒ–å…¨å±€ options</li> <li>extend(cpns,buildin) å°†å…¨å±€ç»„ä»¶æ‹“å±•åˆ°å…¨å±€ options ä¸Šå» å…±æ‰€æœ‰å­ç»„ä»¶ä½¿ç”¨ å…¶å®æ˜¯ keep-alive</li></ul> <h4 id="createpatchfunction"><a href="#createpatchfunction" class="header-anchor">#</a> createPatchFunction</h4> <p>Vue ä¸­ä½¿ç”¨ 800+è¡Œä»£ç å»åˆ›å»º patch æ–¹æ³•ï¼ŒcreatePatchFunction æ–¹æ³•æ¥å—ä¸€ä¸ªå¯¹è±¡åŒ…å«ä¸¤ä¸ªå±æ€§ï¼Œå¦‚ä¸‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> patch <span class="token operator">=</span> <span class="token function">createPatchFunction</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  nodeOps<span class="token operator">:</span> nodeOps<span class="token punctuation">,</span> <span class="token comment">// èŠ‚ç‚¹çš„crudæ“ä½œ</span>
  modules<span class="token operator">:</span> modules<span class="token punctuation">,</span> <span class="token comment">// klass ref style transition ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>å¹³å°ç›¸å…³ dom æ–¹æ³• nodeOpsï¼šweb å¹³å°å’Œ weex å¹³å°ä¸‹çš„ dom èŠ‚ç‚¹çš„ crud æ“ä½œä¸åŒï¼Œæ‰€ä»¥åœ¨æŠŠ vnode patch åˆ°çœŸå® dom ä¸­ä¹Ÿå…·æœ‰å·®åˆ«ã€‚</li> <li>å¹³å°ç›¸å…³ modulesï¼šåƒæ˜¯ web å¹³å°ä¸‹åŒ…æ‹¬ attrs class style ç­‰ç­‰ï¼Œä½†åˆ°äº† weex å¹³å°ä¸‹ï¼Œæ“ä½œæ ·å¼ï¼Œdom å±æ€§ç­‰ç­‰å¾ˆå¤šå·®å¼‚ã€‚</li></ul> <p>é‡‡ç”¨å·¥å‚æ–¹æ³•çš„æ–¹å¼å»åˆ›å»ºä¸€ä¸ª patch æ–¹æ³•ï¼Œåœ¨è°ƒç”¨ patch å‰å°†ç¯å¢ƒå˜é‡æ’å®šï¼Œä¸ç®¡å¯¹åº”ä»€ä¹ˆå¹³å°ï¼Œè™½ç„¶å…·ä½“å®ç°ä¸åŒï¼Œä½†å¯¹äº Vue åœ¨ patch çš„è¿‡ç¨‹ä¸­åªæ‹¿åˆ°çš„å·²ç»æ˜¯é€‚åº”å¹³å°çš„ç›¸å…³æ–¹æ³•ã€‚</p> <h4 id="åˆå§‹åŒ–-config-å’Œæ ¡éªŒç›¸å…³-map-function"><a href="#åˆå§‹åŒ–-config-å’Œæ ¡éªŒç›¸å…³-map-function" class="header-anchor">#</a> åˆå§‹åŒ– config å’Œæ ¡éªŒç›¸å…³ map-function</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
  optionMergeStrategies<span class="token operator">:</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> isBooleanAttr <span class="token operator">=</span> <span class="token function">makeMap</span><span class="token punctuation">(</span>
  <span class="token string">&quot;allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,&quot;</span> <span class="token operator">+</span>
    <span class="token string">&quot;default,defaultchecked,defaultmuted,defaultselected,defer,disabled,&quot;</span> <span class="token operator">+</span>
    <span class="token string">&quot;enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,&quot;</span> <span class="token operator">+</span>
    <span class="token string">&quot;muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,&quot;</span> <span class="token operator">+</span>
    <span class="token string">&quot;required,reversed,scoped,seamless,selected,sortable,translate,&quot;</span> <span class="token operator">+</span>
    <span class="token string">&quot;truespeed,typemustmatch,visible&quot;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>config é€šè¿‡ Vue.config å¯é…ç½®çš„å…¨å±€é…ç½®ï¼Œæœ€æ ¸å¿ƒéƒ¨åˆ†æ˜¯ opts ä¸­çš„æ¯ä¸ªå‚æ•°çš„åˆå¹¶ç­–ç•¥ã€‚</li> <li>makeMap ä¸¾å†…éƒ¨ä¸€ä¸ªä¾‹å­ï¼ŒVue ä¸ºäº†ç”¨æˆ·å¯ä»¥æœ‰å®Œå…¨ç­‰åŒäºåŸç”Ÿ html çš„ç¼–ç ä½“éªŒï¼Œæ ‡è®°äº†å¾ˆå¤šå†…ç½®çš„å±æ€§ï¼Œä¸Šè¿°ä»£ç ä¸­ä»…ä»…ä»¥ dom ä¸­ä¸€äº›å¸ƒå°”ç±»å‹çš„ attrs å¦‚ checkedï¼Œrequired ç­‰ç­‰ï¼Œè¯¥æ–¹æ³•æ„å»ºä¸€ä¸ª mapï¼Œmap ä¸­çš„ key å€¼ä¸ºå­—ç¬¦ä¸²ä¸­çš„æ¯ä¸€é¡¹ï¼Œvalue ä¸º trueï¼Œè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ª functionï¼Œç”¨äºæ£€æµ‹ä¼ å…¥å€¼ã€‚ æ¯”å¦‚ï¼Œvar fn = makeMap('checked,required') å°†æ„å»º {checked:'true',required:'true'}ï¼Œå½“ä¼ å…¥ä¸€ä¸ªå¾…æ£€æµ‹ï¼Œfn('checked')å°±è¿”å› trueï¼Œ
fn('some')è¿”å› undefinedã€‚</li></ul> <h4 id="å®‰è£…å¹³å°ç›¸å…³çš„å…¨å±€æŒ‡ä»¤å’Œç»„ä»¶"><a href="#å®‰è£…å¹³å°ç›¸å…³çš„å…¨å±€æŒ‡ä»¤å’Œç»„ä»¶" class="header-anchor">#</a> å®‰è£…å¹³å°ç›¸å…³çš„å…¨å±€æŒ‡ä»¤å’Œç»„ä»¶</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">extend</span><span class="token punctuation">(</span>Vue<span class="token punctuation">.</span>options<span class="token punctuation">.</span>directives<span class="token punctuation">,</span> platformDirectives<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">extend</span><span class="token punctuation">(</span>Vue<span class="token punctuation">.</span>options<span class="token punctuation">.</span>components<span class="token punctuation">,</span> platformComponents<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>æ‹“å±•å¹³å°ç›¸å…³å…¨å±€èµ„æºä»¥ä¾›ä½¿ç”¨</p> <ul><li>directive æŒ‡ä»¤åŒ…æ‹¬ v-show v-model</li> <li>components ç»„ä»¶åŒ…æ‹¬ transition transition-group</li></ul> <h4 id="åˆ›å»ºæ¨¡ç‰ˆç¼–è¯‘å™¨-compiler"><a href="#åˆ›å»ºæ¨¡ç‰ˆç¼–è¯‘å™¨-compiler" class="header-anchor">#</a> åˆ›å»ºæ¨¡ç‰ˆç¼–è¯‘å™¨ compiler</h4> <p>åˆ›å»ºç¼–è¯‘å™¨æ•´ä½“æµç¨‹å¦‚ä¸‹ï¼š</p> <p>createCompilerCreator =&gt; createcompiler =&gt; createCompileToFunctionFn =&gt; compileToFunctions =&gt; compile =&gt; baseCompile =&gt; çœŸæ­£å¼€å§‹ç¼–è¯‘æ­¥éª¤ ã€Œparse optimize generateã€</p> <ul><li>createCompilerCreator ç¼–è¯‘å™¨å·¥å‚å·¥å‚ï¼Œä¹Ÿå°±æ˜¯æ„é€ äº†ç¼–è¯‘å™¨çš„æ„é€ å™¨ï¼Œè¿”å›ä¸€ä¸ªå·¥å‚å‡½æ•°ï¼Œè¿™ä¸ªå·¥å‚å‡½æ•°å°†ç”Ÿæˆç¼–è¯‘å™¨ã€‚</li> <li>createcompiler ä¸Šä¸€æ­¥éª¤ä¸­è¿”å›çš„ç¼–è¯‘å™¨çš„æ„é€ å™¨ï¼Œæ‰§è¡Œå¾—åˆ°ç¼–è¯‘å™¨å°è£…å¯¹è±¡ã€‚è¿™ä¸ªæ–¹æ³•ä¸­å¤„ç†äº†å…¨å±€çš„ç¼–è¯‘å™¨é…ç½®ï¼ŒåŒ…æ‹¬åˆ†éš”ç¬¦é…ç½®ç¼–è¯‘æŠ¥è­¦é…ç½®ã€‚</li> <li>createCompileToFunctionFn å¯¹ç¼–è¯‘å™¨åšäº†ä¸€å±‚ç®€å•å°è£…ï¼Œé€šè¿‡ä¸€ä¸ªå“ˆå¸Œè¡¨å»ç¼“å­˜ ç¼–è¯‘å™¨ç¼–è¯‘å‡ºæ¥çš„ç»“æœï¼Œé˜²æ­¢å¤šæ¬¡ç¼–è¯‘ä¸€ä¸ªæ¨¡ç‰ˆã€‚è¿”å›ä¸€ä¸ªæ¨¡ç‰ˆç¼–è¯‘å™¨ã€‚</li> <li>compileToFunctions ç¼–è¯‘å™¨æœ¬ä½“ï¼Œæ¥å—ç”¨æˆ·å®šä¹‰çš„ options.templateï¼Œæ¥å—é…ç½®ï¼Œæœ€ç»ˆå°†å¤„ç† template=&gt;render å‡½æ•°ï¼Œå†…éƒ¨æµç¨‹æ˜¯è°ƒç”¨æ ¸å¿ƒç¼–è¯‘å™¨ï¼Œè¿›è€Œé€šè¿‡è§£æï¼Œä¼˜åŒ–å’Œç”Ÿæˆä¸‰æ­¥å»å®Œæˆä»£ç ç”Ÿæˆã€‚</li></ul> <p>vue æ¨¡ç‰ˆç¼–è¯‘ååˆ†å¤æ‚å’Œå·§å¦™ï¼Œè¿™é‡Œé€šè¿‡å‡½æ•°æŸ¯é‡ŒåŒ–å»åˆ›å»ºç¼–è¯‘å™¨ï¼Œé€æ­¥æ˜ç¡®ç¯å¢ƒå˜é‡ï¼Œä¹Ÿé€šè¿‡é—­åŒ…å»ç»´æŒä¸€ä¸ªç¼“å­˜ï¼Œæå‡æ€§èƒ½ã€‚</p> <p>æœ¬ç« èŠ‚ä¸»è¦æè¿°äº†åœ¨ new Vue(options)ä¹‹å‰ Vue å†…éƒ¨ä¸ºç”¨æˆ·åšäº†ä»€ä¹ˆå‡†å¤‡ï¼Œå¦‚æœæ²¡æœ‰è¿™éƒ¨åˆ†å†…å®¹ï¼Œå¾ˆå®¹æ˜“åœ¨é˜…è¯»ç†è§£ä»£ç çš„è¿‡ç¨‹ä¸­äº§ç”Ÿå›°æƒ‘ï¼Œä¾‹å¦‚æœ‰çš„å‚æ•°æ€ä¹ˆæ¥çš„ï¼Œè¿™ä¸ªä¸œè¥¿ä»€ä¹ˆæ—¶å€™å®‰è£…ä¸Šçš„ä¹‹ç±»çš„é—®é¢˜ã€‚æœ¬ç« å†…å®¹æœ‰å¾ˆå¤šåœ°æ–¹æ²¡æœ‰è§£å¼€åŒ…è¢±ï¼Œä¾‹å¦‚_render _update é…ç½®åˆå¹¶ åˆ›å»º patch æ–¹æ³• ç­‰ç­‰ç­‰ç­‰ï¼Œè¿™äº›éƒ½æ˜¯ vue çš„æ ¸å¿ƒä¸­çš„æ ¸å¿ƒï¼Œéƒ½ä¼šåœ¨åç»­çš„æ–‡ç« ä¸­ä»”ç»†å‰–æã€‚</p> <p>ã€Šå®Œã€‹</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/frontend/nodejs/nvm.html" class="prev">
        nvm ç‰ˆæœ¬æ§åˆ¶
      </a></span> <span class="next"><a href="/frontend/vue_vuex_vue-router_nuxt/vcode/2.html">
        new Vue(options) ä¸­çš„optionsåˆå¹¶å¤„ç†ï¼ˆäºŒï¼‰
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.8a3e4be4.js" defer></script><script src="/assets/js/2.b1c453a7.js" defer></script><script src="/assets/js/43.f3f083c8.js" defer></script>
  </body>
</html>
